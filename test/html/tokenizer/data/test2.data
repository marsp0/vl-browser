#description
DOCTYPE without name
#data
<!DOCTYPE>
#errors
(1, 10): missing-doctype-name
#states
Data state
#doctype

#doctype-quirks
false
#end-test

#description
DOCTYPE without space before name
#data
<!DOCTYPEhtml>
#errors
(1, 10): missing-whitespace-before-doctype-name
#states
Data state
#doctype
html
#doctype-quirks
true
#end-test

#description
Incorrect DOCTYPE without a space before name
#data
<!DOCTYPEfoo>
#errors
(1, 10): missing-whitespace-before-doctype-name
#states
Data state
#doctype
foo
#doctype-quirks
true
#end-test

#description
DOCTYPE with publicId
#data
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML Transitional 4.01//EN">
#errors
#states
Data state
#doctype
html
#doctype-quirks
true
#doctype-public
-//W3C//DTD HTML Transitional 4.01//EN
#end-test

#description
DOCTYPE with EOF after PUBLIC
#data
<!DOCTYPE html PUBLIC
#errors
(1, 22): eof-in-doctype
#states
Data state
#doctype
html
#doctype-quirks
false
#end-test

#description
DOCTYPE with EOF after PUBLIC '
#data
<!DOCTYPE html PUBLIC '
#errors
(1, 24): eof-in-doctype
#states
Data state
#doctype
html
#doctype-quirks
false
#end-test

#description
DOCTYPE with EOF after PUBLIC 'x
#data
<!DOCTYPE html PUBLIC 'x
#errors
(1, 25): eof-in-doctype
#states
Data state
#doctype
html
#doctype-quirks
false
#doctype-public
x
#end-test

#description
DOCTYPE with systemId
#data
<!DOCTYPE html SYSTEM "-//W3C//DTD HTML Transitional 4.01//EN">
#errors
#states
Data state
#doctype
html
#doctype-quirks
true
#doctype-system
-//W3C//DTD HTML Transitional 4.01//EN
#end-test

#description
DOCTYPE with single-quoted systemId
#data
<!DOCTYPE html SYSTEM '-//W3C//DTD HTML Transitional 4.01//EN'>
#errors
#states
Data state
#doctype
html
#doctype-quirks
true
#doctype-system
-//W3C//DTD HTML Transitional 4.01//EN
#end-test

#description
DOCTYPE with publicId and systemId
#data
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML Transitional 4.01//EN" "-//W3C//DTD HTML Transitional 4.01//EN">
#errors
#states
Data state
#doctype
html
#doctype-quirks
true
#doctype-public
-//W3C//DTD HTML Transitional 4.01//EN
#doctype-system
-//W3C//DTD HTML Transitional 4.01//EN
#end-test

#description
DOCTYPE with > in double-quoted publicId
#data
<!DOCTYPE html PUBLIC ">x
#errors
(1, 24): abrupt-doctype-public-identifier
#states
Data state
#doctype
html
#doctype-quirks
false
#character
x
#end-test

#description
DOCTYPE with > in single-quoted publicId
#data
<!DOCTYPE html PUBLIC '>x
#errors
(1, 24): abrupt-doctype-public-identifier
#states
Data state
#doctype
html
#doctype-quirks
false
#character
x
#end-test

#description
DOCTYPE with > in double-quoted systemId
#data
<!DOCTYPE html PUBLIC "foo" ">x
#errors
(1, 30): abrupt-doctype-system-identifier
#states
Data state
#doctype
html
#doctype-quirks
false
#doctype-public
foo
#character
x
#end-test

#description
DOCTYPE with > in single-quoted systemId
#data
<!DOCTYPE html PUBLIC 'foo' '>x
#errors
(1, 30): abrupt-doctype-system-identifier
#states
Data state
#doctype
html
#doctype-quirks
false
#doctype-public
foo
#character
x
#end-test

#description
Incomplete doctype
#data
<!DOCTYPE html 
#errors
(1, 16): eof-in-doctype
#states
Data state
#doctype
html
#doctype-quirks
false
#end-test

#description
Numeric entity representing the NUL character
#data
&#0000;
#errors
(1, 8): null-character-reference
#states
Data state
#character
�
#end-test

#description
Hexadecimal entity representing the NUL character
#data
&#x0000;
#errors
(1, 9): null-character-reference
#states
Data state
#character
�
#end-test

#description
Numeric entity representing a codepoint after 1114111 (U+10FFFF)
#data
&#2225222;
#errors
(1, 11): character-reference-outside-unicode-range
#states
Data state
#character
�
#end-test

#description
Hexadecimal entity representing a codepoint after 1114111 (U+10FFFF)
#data
&#x1010FFFF;
#errors
(1, 13): character-reference-outside-unicode-range
#states
Data state
#character
�
#end-test

#description
Hexadecimal entity pair representing a surrogate pair
#data
&#xD869;&#xDED6;
#errors
(1, 9): surrogate-character-reference
(1, 17): surrogate-character-reference
#states
Data state
#character
�
#character
�
#end-test

#description
Hexadecimal entity with mixed uppercase and lowercase
#data
&#xaBcD;
#errors
#states
Data state
#character
ꯍ
#end-test

#description
Entity without a name
#data
&;
#errors
#states
Data state
#character
&
#character
;
#end-test

#description
Unescaped ampersand in attribute value
#data
<h a='&'>
#errors
#states
Data state
#start-tag
h
#attr-name
a
#attr-value
&
#end-test

#description
StartTag containing <
#data
<a<b>
#errors
#states
Data state
#start-tag
a<b
#end-test

#description
Non-void element containing trailing /
#data
<h/>
#errors
#states
Data state
#start-tag
h
#start-tag-self-close
true
#end-test

#description
Void element with permitted slash
#data
<br/>
#errors
#states
Data state
#start-tag
br
#start-tag-self-close
true
#end-test

#description
Void element with permitted slash (with attribute)
#data
<br foo='bar'/>
#errors
#states
Data state
#start-tag
br
#start-tag-self-close
true
#attr-name
foo
#attr-value
bar
#end-test

#description
StartTag containing /
#data
<h/a='b'>
#errors
(1, 4): unexpected-solidus-in-tag
#states
Data state
#start-tag
h
#attr-name
a
#attr-value
b
#end-test

#description
Double-quoted attribute value
#data
<h a="b">
#errors
#states
Data state
#start-tag
h
#attr-name
a
#attr-value
b
#end-test

#description
Unescaped </
#data
</
#errors
(1, 3): eof-before-tag-name
#states
Data state
#character
<
#character
/
#end-test

#description
Illegal end tag name
#data
</1>
#errors
(1, 3): invalid-first-character-of-tag-name
#states
Data state
#comment
1
#end-test

#description
Simili processing instruction
#data
<?namespace>
#errors
(1, 2): unexpected-question-mark-instead-of-tag-name
#states
Data state
#comment
?namespace
#end-test

#description
A bogus comment stops at >, even if preceded by two dashes
#data
<?foo-->
#errors
(1, 2): unexpected-question-mark-instead-of-tag-name
#states
Data state
#comment
?foo--
#end-test

#description
Unescaped <
#data
foo < bar
#errors
(1, 6): invalid-first-character-of-tag-name
#states
Data state
#character
f
#character
o
#character
o
#character
 
#character
<
#character
 
#character
b
#character
a
#character
r
#end-test

#description
Comment with dash
#data
<!---x
#errors
(1, 7): eof-in-comment
#states
Data state
#comment
-x
#end-test

#description
Start tag with no attributes but space before the greater-than sign
#data
<h >
#errors
#states
Data state
#start-tag
h
#end-test

#description
Empty attribute followed by uppercase attribute
#data
<h a B=''>
#errors
#states
Data state
#start-tag
h
#attr-name
a
#attr-value

#attr-name
b
#attr-value

#end-test

#description
Double-quote after attribute name
#data
<h a ">
#errors
(1, 6): unexpected-character-in-attribute-name
#states
Data state
#start-tag
h
#attr-name
a
#attr-value

#attr-name
"
#attr-value

#end-test

#description
Single-quote after attribute name
#data
<h a '>
#errors
(1, 6): unexpected-character-in-attribute-name
#states
Data state
#start-tag
h
#attr-name
a
#attr-value

#attr-name
'
#attr-value

#end-test

#description
Empty end tag with following characters
#data
a</>bc
#errors
(1, 4): missing-end-tag-name
#states
Data state
#character
a
#character
b
#character
c
#end-test

#description
Empty end tag with following tag
#data
a</><b>c
#errors
(1, 4): missing-end-tag-name
#states
Data state
#character
a
#start-tag
b
#character
c
#end-test

#description
Empty end tag with following comment
#data
a</><!--b-->c
#errors
(1, 4): missing-end-tag-name
#states
Data state
#character
a
#comment
b
#character
c
#end-test

#description
Empty end tag with following end tag
#data
a</></b>c
#errors
(1, 4): missing-end-tag-name
#states
Data state
#character
a
#end-tag
b
#character
c
#end-test
